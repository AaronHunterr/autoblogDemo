<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>Widget Comparison</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
  </style>
</head>

<body>
  <header class="site-header" id="siteHeader">
    <div class="container header__inner">
      <a class="brand" href="./"><span class="brand__mark" aria-hidden="true">⬤</span><span class="brand__text">Auto News Demo</span></a>
      <nav class="site-nav" id="siteNav" aria-label="Primary">
        <a href="./widget.html">Widget Test</a>
        <a href="./quotes.html" class="is-active">Widget Comparison</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container hero__inner">
      <h1 class="hero__title">Widget Comparison</h1>
      <p class="hero__dek">Compare two widgets side-by-side or stacked below. Choose types, colors, and view differences instantly.</p>
    </div>
  </section>

  <main class="container quotes-wrap">
    <div class="quotes-grid">
      <section class="quotes-card demo-panel" style="background:#2d3442;">
        <div id="slotA"></div>
      </section>
      <section class="quotes-card demo-panel" style="background:#2d3442;">
        <div id="slotB"></div>
      </section>
    </div>
    <section class="quotes-card demo-panel" style="background:#2d3442;">
      <div id="slotA_stack"></div>
    </section>
    <section class="quotes-card demo-panel" style="background:#2d3442;">
      <div id="slotB_stack"></div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer__inner">
      <p class="copyright">© <span id="year"></span> Demo Media.</p>
    </div>
  </footer>

  <script src="https://www.rydeshopper.com/app/shoppingtools/scripts/widget.js"></script>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
    const dtc = window.dtc;

    const defA = {
      type: 'new-car-funnel',
      color: '#303745'
    };
    const defB = {
      type: 'new-car-funnel',
      color: '#de2828'
    };

    function make(type, color, target = 'parent') {
      const map = {
        'new-car-funnel': ['dt-new-car-funnel', {}],
        'new-car-funnel-compact': ['dt-new-car-funnel', {
          'data-theme': 'compact'
        }],
        'new-car-quote': ['dt-new-car-quote', {}],
        'new-car-quote-minimal': ['dt-new-car-quote', {
          'data-theme': 'minimal'
        }],
        'used-car-quote': ['dt-used-car-quote', {}],
        'used-car-quote-minimal': ['dt-used-car-quote', {
          'data-theme': 'minimal'
        }],
        'new-car-image': ['dt-new-car-image', {}],
        'new-car-image-compact': ['dt-new-car-image', {
          'data-theme': 'compact'
        }],
        'used-car-image': ['dt-used-car-image', {}],
        'calculator': ['dt-car-payment-calculator', {}],
        'used-pay-body': ['dt-used-car-payment-body-type', {}],
        'used-pay-mm': ['dt-used-car-payment-makes-models', {}]
      };
      const [cls, extra] = map[type];
      const d = document.createElement('div');
      d.className = cls;
      d.setAttribute('data-gid', '0000-5200');
      d.setAttribute('data-tenant', 'RSP1995');
      d.setAttribute('data-color-primary', color);
      d.setAttribute('data-font-primary', 'Poppins, sans-serif');
      if (cls === 'dt-new-car-funnel') {
        d.setAttribute('data-make', 'Chevrolet');
        d.setAttribute('data-model', 'Blazer');
      }
      Object.entries(extra).forEach(([k, v]) => d.setAttribute(k, v));
      return d;
    }

    const slotA = document.getElementById('slotA');
    const slotB = document.getElementById('slotB');
    const slotA_stack = document.getElementById('slotA_stack');
    const slotB_stack = document.getElementById('slotB_stack');

    const instA = new dtc.Widget({
      slot: 1
    });
    const instB = new dtc.Widget({
      slot: 2
    });
    const instA2 = new dtc.Widget({
      slot: 3
    });
    const instB2 = new dtc.Widget({
      slot: 4
    });

    async function render() {
      [slotA, slotB, slotA_stack, slotB_stack].forEach(s => s.innerHTML = '');
      const elA = make(defA.type, defA.color);
      const elB = make(defB.type, defB.color);
      const elA2 = make(defA.type, defA.color);
      const elB2 = make(defB.type, defB.color);
      slotA.appendChild(elA);
      slotB.appendChild(elB);
      slotA_stack.appendChild(elA2);
      slotB_stack.appendChild(elB2);
      await instA.render(elA);
      await instB.render(elB);
      await instA2.render(elA2);
      await instB2.render(elB2);
    }
    render();
  </script>
</body>

</html>
